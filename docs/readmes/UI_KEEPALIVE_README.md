# Trading UI Keepalive System

Î‘Ï…Ï„ÏŒ Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎºÏÎ±Ï„Î¬ÎµÎ¹ Ï„Î¿ Trading UI ÎµÎ½ÎµÏÎ³ÏŒ ÏƒÏ„Î¿ port 8002 ÎºÎ±Î¹ Ï„Î¿ ÎµÏ€Î±Î½ÎµÎºÎºÎ¹Î½ÎµÎ¯ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Î±Î½ ÏƒÎ²Î®ÏƒÎµÎ¹.

## ğŸš€ Î“ÏÎ®Î³Î¿ÏÎ· Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·

### ÎœÎ­Î¸Î¿Î´Î¿Ï‚ 1: Î§ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·
```bash
# Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· Ï„Î¿Ï… keepalive monitor
./start_ui_keepalive.sh
```

### ÎœÎ­Î¸Î¿Î´Î¿Ï‚ 2: Systemd Service (Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·)
```bash
# Î•Î³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï„Î¿Ï… service
./install_ui_service.sh

# Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· Ï„Î¿Ï… service
sudo systemctl start trading-ui

# ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
sudo systemctl status trading-ui
```

## ğŸ“‹ Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬

- **Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·**: Î•Ï€Î±Î½ÎµÎºÎºÎ¹Î½ÎµÎ¯ Ï„Î¿ UI Î±Î½ ÏƒÎ²Î®ÏƒÎµÎ¹
- **ÎˆÎ¾Ï…Ï€Î½Î¿Ï‚ ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚**: Î•Î»Î­Î³Ï‡ÎµÎ¹ ÎºÎ¬Î¸Îµ 30 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
- **Î ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î± Î±Ï€ÏŒ Loops**: ÎœÎ­Î³Î¹ÏƒÏ„Î¿ 10 ÎµÏ€Î±Î½ÎµÎºÎºÎ¹Î½Î®ÏƒÎµÎ¹Ï‚ Î±Î½Î¬ ÏÏÎ±
- **ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Port**: Î£ÎºÎ¿Ï„ÏÎ½ÎµÎ¹ Ï€Î±Î»Î¹Î¬ processes Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±
- **Logging**: ÎšÎ±Ï„Î±Î³ÏÎ¬Ï†ÎµÎ¹ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ ÎµÎ½Î­ÏÎ³ÎµÎ¹ÎµÏ‚
- **Graceful Shutdown**: ÎšÎ±Î¸Î±ÏÏŒ ÎºÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ Î¼Îµ Ctrl+C

## ğŸ”§ Î‘ÏÏ‡ÎµÎ¯Î± Î£Ï…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚

- `keep_ui_alive.py` - ÎšÏÏÎ¹Î¿ script Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ·Ï‚
- `start_ui_keepalive.sh` - Script ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·Ï‚
- `trading-ui.service` - Systemd service file
- `install_ui_service.sh` - Script ÎµÎ³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ service
- `ui_keepalive.log` - Log file

## ğŸ“Š Î ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î¿ UI

Î¤Î¿ Trading UI ÎµÎ¯Î½Î±Î¹ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿ ÏƒÏ„Î¿:
- **Local**: http://localhost:8002
- **Network**: http://192.168.2.7:8002

## ğŸ› ï¸ Î•Î½Ï„Î¿Î»Î­Ï‚ Systemd

```bash
# Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·
sudo systemctl start trading-ui

# Î”Î¹Î±ÎºÎ¿Ï€Î®
sudo systemctl stop trading-ui

# Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎ·
sudo systemctl restart trading-ui

# ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·
sudo systemctl status trading-ui

# Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· (ÎµÎºÎºÎ¯Î½Î·ÏƒÎ· ÏƒÏ„Î¿ boot)
sudo systemctl enable trading-ui

# Î‘Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ·
sudo systemctl disable trading-ui

# Î ÏÎ¿Î²Î¿Î»Î® logs
journalctl -u trading-ui -f

# Î ÏÎ¿Î²Î¿Î»Î® Ï„ÎµÎ»ÎµÏ…Ï„Î±Î¯Ï‰Î½ logs
journalctl -u trading-ui --since "1 hour ago"
```

## ğŸ“ Logs

### Î ÏÎ¿Î²Î¿Î»Î® Keepalive Logs
```bash
# Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ Î³ÏÎ±Î¼Î¼Î­Ï‚
tail -f ui_keepalive.log

# ÎŒÎ»Î¿ Ï„Î¿ log
cat ui_keepalive.log
```

### Î ÏÎ¿Î²Î¿Î»Î® System Logs
```bash
# Live logs
journalctl -u trading-ui -f

# Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯ÎµÏ‚ 100 Î³ÏÎ±Î¼Î¼Î­Ï‚
journalctl -u trading-ui -n 100
```

## ğŸ” Troubleshooting

### ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î±Î½ Ï„ÏÎ­Ï‡ÎµÎ¹ Ï„Î¿ UI
```bash
curl http://localhost:8002
```

### ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï€Î¿Î¹Î± process Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ port 8002
```bash
lsof -i :8002
```

### Î£ÎºÏŒÏ„Ï‰Î¼Î± process ÏƒÏ„Î¿ port 8002
```bash
sudo lsof -ti :8002 | xargs kill -9
```

### ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ service
```bash
systemctl is-active trading-ui
systemctl is-enabled trading-ui
```

## âš™ï¸ Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚

ÎœÏ€Î¿ÏÎµÎ¯Ï‚ Î½Î± Î±Î»Î»Î¬Î¾ÎµÎ¹Ï‚ Ï„Î¹Ï‚ ÏÏ…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚ ÏƒÏ„Î¿ `keep_ui_alive.py`:

```python
self.check_interval = 30      # ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÎºÎ¬Î¸Îµ 30 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
self.max_restarts = 10        # ÎœÎ­Î³Î¹ÏƒÏ„Î¿ 10 ÎµÏ€Î±Î½ÎµÎºÎºÎ¹Î½Î®ÏƒÎµÎ¹Ï‚ Î±Î½Î¬ ÏÏÎ±
self.ui_port = 8002          # Port Ï„Î¿Ï… UI
```

## ğŸš¨ Î£Î·Î¼Î±Î½Ï„Î¹ÎºÎ­Ï‚ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚

1. **Virtual Environment**: Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹ÎµÎ¯ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Ï„Î¿ `myenv`
2. **Permissions**: Î¤Î± scripts Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÎ¯Î½Î±Î¹ executable
3. **Network**: Î¤Î¿ UI ÎµÎ¯Î½Î±Î¹ Ï€ÏÎ¿ÏƒÎ²Î¬ÏƒÎ¹Î¼Î¿ Î±Ï€ÏŒ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ IP (0.0.0.0)
4. **Security**: Î¤Î¿ systemd service Ï„ÏÎ­Ï‡ÎµÎ¹ Î¼Îµ Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î± Î´Î¹ÎºÎ±Î¹ÏÎ¼Î±Ï„Î±

## ğŸ“ˆ Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ·

Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Ï€Î±ÏÎ­Ï‡ÎµÎ¹:
- Real-time logs
- Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ ÎµÏ€Î±Î½ÎµÎºÎºÎ¹Î½Î®ÏƒÎµÏ‰Î½
- ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï…Î³ÎµÎ¯Î±Ï‚ Ï„Î¿Ï… UI
- Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Î½Î¬ÎºÎ±Î¼ÏˆÎ· Î±Ï€ÏŒ ÏƒÏ†Î¬Î»Î¼Î±Ï„Î±

## ğŸ”„ Î•Î½Î·Î¼ÎµÏÏÏƒÎµÎ¹Ï‚

Î“Î¹Î± Î½Î± ÎµÎ½Î·Î¼ÎµÏÏÏƒÎµÎ¹Ï‚ Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î±:

1. ÎšÎ¬Î½Îµ Ï„Î¹Ï‚ Î±Î»Î»Î±Î³Î­Ï‚ ÏƒÏ„Î± Î±ÏÏ‡ÎµÎ¯Î±
2. Î•Ï€Î±Î½ÎµÎºÎºÎ¯Î½Î·ÏƒÎµ Ï„Î¿ service:
   ```bash
   sudo systemctl restart trading-ui
   ```

Î‰ Î³Î¹Î± Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î· Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±, Î±Ï€Î»Î¬ ÏƒÏ„Î±Î¼Î¬Ï„Î± ÎºÎ±Î¹ Î¾ÎµÎºÎ¯Î½Î± Î¾Î±Î½Î¬ Ï„Î¿ script.